<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Khushal Admin | Control Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <style>
        :root { --pink: #be185d; --dark: #0f172a; }
        body { background: #f1f5f9; font-family: sans-serif; }
        .admin-nav { background: var(--dark); color: white; padding: 15px; border-bottom: 5px solid var(--pink); }
        .login-card { max-width: 400px; margin: 100px auto; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: none; }
        .upload-card { max-width: 500px; margin: 50px auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); border: none; }
    </style>
</head>
<body>

<div id="login-box" class="container">
    <div class="card login-card p-4 text-center">
        <h3 class="fw-bold mb-4">ایڈمن لاگ ان</h3>
        <input type="password" id="pass" class="form-control mb-3 text-center" placeholder="پاس ورڈ درج کریں">
        <button class="btn btn-danger w-100 py-2 fw-bold" onclick="login()" style="background:var(--pink)">لاگ ان کریں</button>
    </div>
</div>

<div id="admin-main" class="d-none">
    <nav class="admin-nav d-flex justify-content-between align-items-center shadow">
        <h4 class="mb-0 fw-bold">خوشحال فیبرک کنٹرول پینل</h4>
        <a href="index.html" class="btn btn-sm btn-outline-light">← واپس سیلز پینل</a>
    </nav>
    <div class="container">
        <div class="upload-card">
            <h5 class="fw-bold mb-4 text-center text-pink" style="color:var(--pink)">نیا اسٹاک شامل کریں</h5>
            <div class="mb-3"><label class="small fw-bold">سوٹ کا نام:</label><input type="text" id="n" class="form-control" placeholder="مثلاً: ثناء سفیناز"></div>
            <div class="mb-3"><label class="small fw-bold">قیمت (روپے):</label><input type="number" id="p" class="form-control" placeholder="5500"></div>
            <div class="mb-3"><label class="small fw-bold">تصویر اپلوڈ کریں:</label><input type="file" id="i" class="form-control"></div>
            <button id="save-btn" class="btn btn-dark w-100 py-3 fw-bold shadow">اسٹاک میں محفوظ کریں</button>
        </div>
    </div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";
    import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-storage.js";

    const firebaseConfig = {
        apiKey: "AIzaSyApmZ5_7ohXDQWRALsfO8d7IfwVhJBweas",
        authDomain: "khushal-pos.firebaseapp.com",
        projectId: "khushal-pos",
        storageBucket: "khushal-pos.firebasestorage.app",
        messagingSenderId: "400013746816",
        appId: "1:400013746816:web:6f193299df61ac32ee3c65"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const storage = getStorage(app);

    window.login = () => {
        if(document.getElementById('pass').value === "khushal123") {
            document.getElementById('login-box').classList.add('d-none');
            document.getElementById('admin-main').classList.remove('d-none');
        } else { alert("غلط پاس ورڈ!"); }
    };

    document.getElementById('save-btn').onclick = async () => {
        const file = document.getElementById('i').files[0];
        const name = document.getElementById('n').value;
        const price = document.getElementById('p').value;
        if(!file || !name || !price) return alert("معلومات مکمل کریں!");

        const btn = document.getElementById('save-btn');
        btn.innerText = "اپلوڈ ہو رہا ہے..."; btn.disabled = true;

        try {
            const storageRef = ref(storage, 'products/' + Date.now() + "_" + file.name);
            await uploadBytes(storageRef, file);
            const imgUrl = await getDownloadURL(storageRef);
            await addDoc(collection(db, "products"), { name, price: Number(price), img: imgUrl });
            alert("کامیابی سے شامل ہو گیا!");
            location.reload();
        } catch (e) { alert("غلطی: " + e.message); btn.innerText = "دوبارہ کوشش کریں"; btn.disabled = false; }
    };
</script>
</body>
</html>
