<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ایڈمن کنٹرول | خوشحال فیبرک</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <style>
        body { background: #f1f5f9; padding: 20px; font-family: sans-serif; }
        .card { border: none; border-radius: 15px; box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        .form-control { padding: 12px; border-radius: 10px; margin-bottom: 15px; }
        .btn-dark { padding: 15px; border-radius: 10px; font-weight: bold; width: 100%; }
        #admin-ui { display: none; }
    </style>
</head>
<body>

<div class="container">
    <div id="login-ui" class="card p-4 mx-auto" style="max-width: 400px; margin-top: 50px;">
        <h4 class="text-center fw-bold mb-4">ایڈمن لاگ ان</h4>
        <input type="password" id="passInput" class="form-control" placeholder="پاس ورڈ (khushal123)">
        <button onclick="doLogin()" class="btn btn-primary w-100">داخل ہوں</button>
    </div>

    <div id="admin-ui" class="card p-4 mx-auto" style="max-width: 500px;">
        <h4 class="fw-bold mb-4 text-primary">نیا اسٹاک شامل کریں</h4>
        
        <label class="small fw-bold">سوٹ کا نام:</label>
        <input type="text" id="suitName" class="form-control" placeholder="مثلاً: صفیہ لان">
        
        <div class="row">
            <div class="col-6">
                <label class="small fw-bold">اصل قیمت:</label>
                <input type="number" id="suitPrice" class="form-control" placeholder="5000">
            </div>
            <div class="col-6">
                <label class="small fw-bold">ڈسکاؤنٹ (%):</label>
                <input type="number" id="suitDiscount" class="form-control" value="0">
            </div>
        </div>
        
        <label class="small fw-bold">تصویر کا لنک (Image URL):</label>
        <input type="text" id="suitImg" class="form-control" placeholder="https://...">

        <label class="small fw-bold">آفر (مثلاً: Buy 1 Get 1):</label>
        <input type="text" id="offerTag" class="form-control" placeholder="خالی چھوڑ سکتے ہیں">

        <button id="saveBtn" class="btn btn-dark shadow mt-2">اسٹاک میں محفوظ کریں</button>
        <div class="text-center mt-3 small"><a href="index.html">سیلز پیج دیکھیں</a></div>
    </div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyApmZ5_7ohXDQWRALsfO8d7IfwVhJBweas",
        authDomain: "khushal-pos.firebaseapp.com",
        projectId: "khushal-pos",
        storageBucket: "khushal-pos.firebasestorage.app",
        messagingSenderId: "400013746816",
        appId: "1:400013746816:web:6f193299df61ac32ee3c65"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.doLogin = () => {
        if(document.getElementById('passInput').value === 'khushal123'){
            document.getElementById('login-ui').style.display='none';
            document.getElementById('admin-ui').style.display='block';
        } else { alert('غلط پاس ورڈ!'); }
    };

    document.getElementById('saveBtn').onclick = async () => {
        const name = document.getElementById('suitName').value;
        const price = document.getElementById('suitPrice').value;
        const disc = document.getElementById('suitDiscount').value;
        const img = document.getElementById('suitImg').value;
        const offer = document.getElementById('offerTag').value;

        if(!name || !price || !img) return alert("براہ کرم ضروری معلومات بھریں!");

        try {
            await addDoc(collection(db, "products"), { 
                name, price: Number(price), discount: Number(disc), img, offerTag: offer 
            });
            alert("مال کامیابی سے شامل ہو گیا!");
            location.reload();
        } catch (e) { alert("Error: " + e.message); }
    };
</script>
</body>
</html>
